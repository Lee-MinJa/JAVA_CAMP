<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="com.mybatis.mapper.ReviewCmntMapper"> 
 <select id="ReviewCmntList" parameterType="map" resultType="map">
SELECT c.REVIEW_NUM, c.REVIEW_CMNT_CONTENT,c.REVIEW_CMNT_REGDATE
FROM review_cmnt c, review r
WHERE r.REVIEW_NUM = c.REVIEW_NUM
AND r.REVIEW_NUM = #{REVIEW_NUM}

</select>

 <insert id="ReviewCmntInsert" parameterType="map" >

INSERT INTO REVIEW_CMNT(REVIEW_NUM, REVIEW_CMNT_CONTENT, REVIEW_CMNT_REGDATE)
VALUES((SELECT REVIEW_NUM FROM REVIEW WHERE REVIEW_NUM=#{REVIEW_NUM}), '뱃지주세용' 
,TO_CHAR(sysdate,'YYYY-MM-DD'))

</insert>

<update id="ReviewYNUpdate" parameterType="map">
UPDATE REVIEW 
SET REVIEW_CMNT_YN ='Y'
WHERE REVIEW_NUM= #{REVIEW_NUM}
</update>

<update id="ReviewCmntUpdate" parameterType="map">
     UPDATE REVIEW
     SET
     REVIEW_RATED = #{REVIEW_RATED}
     ,REVIEW_CONTENT= #{REVIEW_CONTENT}
     ,REVIEW_REGDATE=TO_CHAR(sysdate,'YYYY-MM-DD')
     WHERE REVIEW_NUM= #{REVIEW_NUM}
</update>

<delete id="ReviewCmntDelete" parameterType="map">
	DELETE FROM REVIEW
	WHERE REVIEW_NUM=# {REVIEW_NUM}
</delete>



</mapper>
